<!DOCTYPE html>
<html>
<head>
<title>Gold Portfolio Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
font-family:Arial;
background:#f4f6f9;
padding:20px;
}

h1{color:#b8860b;}

.card{
background:white;
padding:20px;
margin-bottom:20px;
border-radius:12px;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

input,select{
padding:6px;
border-radius:6px;
border:1px solid #ccc;
}

button{
padding:6px 12px;
border:none;
border-radius:6px;
background:#b8860b;
color:white;
cursor:pointer;
}

table{
width:100%;
border-collapse:collapse;
}

th,td{
padding:10px;
border-bottom:1px solid #eee;
text-align:right;
}

th:first-child,td:first-child{text-align:center;}
th:nth-child(3),td:nth-child(3){text-align:left;}

.green{color:green;font-weight:bold;}
.red{color:red;font-weight:bold;}
.gray{color:gray;}

.chart-container{
max-width:450px;
height:320px;
margin:auto;
}

.lock{color:gray;}

</style>
</head>
<body>

<h1>ðŸª™ Gold Portfolio Dashboard</h1>

<!-- INPUT DATA -->
<div class="card">

<h3>Tambah Transaksi</h3>

<input type="number" id="gram" placeholder="Gram">
<input type="text" id="type" placeholder="Type">
<input type="number" id="beli" placeholder="Harga Beli">

<select id="status">
<option value="READY">READY</option>
<option value="PO">PO</option>
<option value="SOLD">SOLD</option>
</select>

<button onclick="addData()">Tambah</button>

</div>

<!-- GOLD PRICE -->
<div class="card">

Harga emas per gram:

<input type="number" id="currentPrice" value="1600000">

<button onclick="calculate()">Update</button>

</div>

<!-- SUMMARY -->
<div class="card">

<p>Total Modal Aktif: <span id="modal"></span></p>
<p>Total Realized Profit: <span id="profit"></span></p>
<p>Total Gram Aktif: <span id="gramTotal"></span></p>
<p>Nilai Portofolio: <span id="portfolio"></span></p>
<p>Unrealized P/L: <span id="unreal"></span></p>

</div>

<!-- CHART -->
<div class="card">

<h3>Status Distribution</h3>

<div class="chart-container">
<canvas id="chart"></canvas>
</div>

</div>

<!-- TABLE -->
<div class="card">

<h3>Detail Transaksi</h3>

<table>

<thead>

<tr>
<th>No</th>
<th>Gram</th>
<th>Type</th>
<th>Beli</th>
<th>Jual</th>
<th>Status</th>
<th>Profit</th>
<th>Action</th>
</tr>

</thead>

<tbody id="tbody"></tbody>

</table>

</div>

<script>

// ===== DEFAULT DATA =====

const defaultData=[
{gram:5,type:"LM",beli:13500000,jual:15700000,status:"SOLD"},
{gram:8,type:"LM IMLEK 2026",beli:23950800,jual:26500000,status:"SOLD"},
{gram:2,type:"LM",beli:5676000,jual:0,status:"PO"},
{gram:3,type:"LM",beli:9744000,jual:0,status:"PO"},
{gram:0.5,type:"LM WEDDING COUPLE",beli:1633500,jual:0,status:"READY"},
{gram:0.5,type:"LM BABY BOY",beli:1633500,jual:0,status:"READY"},
{gram:0.5,type:"LM BABY GIRL",beli:1633500,jual:0,status:"READY"},
{gram:0.5,type:"LM WEDDING COUPLE",beli:1606500,jual:0,status:"READY"},
{gram:0.5,type:"LM BABY BOY",beli:1606500,jual:0,status:"READY"},
{gram:8,type:"LM IMLEK 2026",beli:24447300,jual:0,status:"READY"}
];


// ===== STORAGE =====

let userData=JSON.parse(localStorage.getItem("userData"))||[];

let defaultOverride=JSON.parse(localStorage.getItem("defaultOverride"))||[];

let chart;


// ===== GET ALL DATA =====

function getData(){

let merged=[...defaultData];

defaultOverride.forEach((override,i)=>{

merged[i]={...merged[i],...override};

});

return [...merged,...userData];

}


// ===== SAVE =====

function save(){

localStorage.setItem("userData",JSON.stringify(userData));

localStorage.setItem("defaultOverride",JSON.stringify(defaultOverride));

}


// ===== ADD DATA =====

function addData(){

let gram=parseFloat(gramInput.value);

let type=typeInput.value;

let beli=parseFloat(beliInput.value);

let status=statusInput.value;

let price=parseFloat(currentPrice.value);

let jual=status=="SOLD"?gram*price:0;

userData.push({gram,type,beli,jual,status});

save();

render();

calculate();

}


// ===== UPDATE STATUS =====

function updateStatus(index,value){

let price=parseFloat(currentPrice.value);

let data=getData()[index];

if(index<defaultData.length){

defaultOverride[index]=defaultOverride[index]||{};

defaultOverride[index].status=value;

if(value=="SOLD"&&!defaultOverride[index].jual){

defaultOverride[index].jual=data.gram*price;

}

}else{

let i=index-defaultData.length;

userData[i].status=value;

if(value=="SOLD"&&!userData[i].jual){

userData[i].jual=data.gram*price;

}

}

save();

render();

calculate();

}


// ===== UPDATE JUAL =====

function updateJual(index,value){

value=parseFloat(value)||0;

if(index<defaultData.length){

defaultOverride[index]=defaultOverride[index]||{};

defaultOverride[index].jual=value;

}else{

userData[index-defaultData.length].jual=value;

}

save();

calculate();

}


// ===== DELETE USER DATA =====

function deleteData(index){

userData.splice(index,1);

save();

render();

calculate();

}


// ===== RENDER =====

function render(){

let data=getData();

tbody.innerHTML="";

data.forEach((d,i)=>{

let profit=d.status=="SOLD"?d.jual-d.beli:null;

let cls=profit>0?"green":profit<0?"red":"gray";

tbody.innerHTML+=`

<tr>

<td>${i+1}</td>

<td>${d.gram}</td>

<td>${d.type}</td>

<td>Rp ${d.beli.toLocaleString("id-ID")}</td>

<td>

<input type="number"

value="${d.jual||""}"

${d.status!="SOLD"?"disabled":""}

onchange="updateJual(${i},this.value)">

</td>

<td>

<select onchange="updateStatus(${i},this.value)">

<option ${d.status=="READY"?"selected":""}>READY</option>
<option ${d.status=="PO"?"selected":""}>PO</option>
<option ${d.status=="SOLD"?"selected":""}>SOLD</option>

</select>

</td>

<td class="${cls}">

${profit!=null?"Rp "+profit.toLocaleString("id-ID"):"-"}

</td>

<td>

${i<defaultData.length?'<span class="lock">ðŸ”’</span>':`<button onclick="deleteData(${i-defaultData.length})">Hapus</button>`}

</td>

</tr>

`;

});

}


// ===== CALCULATE =====

function calculate(){

let price=parseFloat(currentPrice.value);

let data=getData();

let modal=0,profit=0,gram=0,value=0;

let statusCount={READY:0,PO:0,SOLD:0};

data.forEach(d=>{

statusCount[d.status]++;

if(d.status!="SOLD"){

modal+=d.beli;

gram+=d.gram;

value+=d.gram*price;

}else{

profit+=d.jual-d.beli;

}

});

let unreal=value-modal;

modal.innerHTML="Rp "+modal.toLocaleString("id-ID");

profit.innerHTML="Rp "+profit.toLocaleString("id-ID");

gramTotal.innerHTML=gram+" gram";

portfolio.innerHTML="Rp "+value.toLocaleString("id-ID");

unreal.innerHTML=`<span class="${unreal>=0?"green":"red"}">Rp ${unreal.toLocaleString("id-ID")}</span>`;

if(chart)chart.destroy();

chart=new Chart(document.getElementById("chart"),{

type:"doughnut",

data:{

labels:Object.keys(statusCount),

datasets:[{

data:Object.values(statusCount),

backgroundColor:["#2ecc71","#f39c12","#3498db"]

}]

},

options:{responsive:true,maintainAspectRatio:false}

});

}


render();

calculate();

</script>

</body>
</html>



